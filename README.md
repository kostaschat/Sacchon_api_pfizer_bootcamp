# pfizer-se-team4

# Software Interface Document for Diabetes Management Web Application



[![N|Solid](https://www.cultur-e.it/wp-content/uploads/2019/10/Pfizer.jpg)](https://nodesource.com/products/nsolid)

###### powered by Pfizer

# Description of the Project

This is the final deliverable in the Software Engineering BootCamp. The project was implemented
by Anestis Almaliotis, Kostas Chatziathanasiou and Kyriaki Karypidou. The project is divided into two distinct subsystems, the REST-API which is the backend, and the Angular app which is the frontend. To the end user, the web app consists of three major components: 

  - The repository of Medical Data (MediDataRepo)
  - The doctor advice services system (DoctorAdvice)
  - The reporting services (Reporter)
 
The MediDataRepo keeps track of the users' blood glucose level, daily consumed carbohydrates,
and medication intake. In the DoctorAdvice section a team of doctors provide advice to patients
after the patient has completed a month of recording metadata. The reporter provides a series of aggregation operations for creating tables and charts.

### The List of Communications
In order for the client (Website) to communicate with the server (Backend), angular requests are taking place for each function. The type of requests that were used in order to implement the REST API are: GET, PUT, POST, DELETE. The service in the back sends valid JSON objects for fulfilling every request from the frontend view. There are three types of users (patient, doctor, chief doctor-reporter). Every user has a role in the system which is assigned to him differently. Doctors and chief doctors can't sign up and are assigned manually to the MySQL database. 

#### Sign up
In order for a patient to sign up in the system a request of this format is exchanged:
  http://localhost:9000/v1/register (POST)
  - The JSON format of the request including all the user's properties are the following:
```JSON
{"username": "petros_iakwvidis19",  
 "password": "12934dasda",
 "role": "patient",
 "address": "Agiwn Pantwn 27",
 "city": "Thessaloniki",
 "dob": "1953-03-12",
 "email": "petros@yahoo.com",
 "firstName": "Petros",
 "lastName": "Iakwvidis",
 "phoneNumber": "69xxxxxxxx",
 "zipCode": "12634"}
```
The patient gets added to the database with all the info he submitted, with the role of the patient and with an autogenerated id. The response of the request is below, although the frontend
does not consume all this information.
```JSON
{
    "username": "petros_iakwvidis19",
    "password": "12934dasda",
    "role": "patient",
    "firstName": "Petros",
    "lastName": "Iakwvidis",
    "email": "petros@yahoo.com",
    "address": "Agiwn Pantwn 27",
    "city": "Thessaloniki",
    "zipCode": "12634",
    "phoneNumber": "69xxxxxxxx",
    "dob": -530409600000,
    "creationDate": 1601618236631,
    "id": 0
}
```
#### Loggin
  The loggin is available for all the users, and is consumed using this endpoint:
  - http://localhost:9000/v1/login  (POST)

The backend checks if the user exists in the database, the required 
JSON data to be received is this:
```JSON
{
 "username": "petros_iakwvidis19",  
 "password": "12934dasda"
}
```

 > **An important thing to mention is that each time someones login, two values are returned, one is the role of the user, because we need it to change the options of each user. Each user depending on his role, can view different things. Also, a boolean value is getting returned that shows if the doctor has made a change to the last consultation.**
 
 #### Update
 > The user can update his profile data.
 [v1/update] [PlDb] (PUT)
 > Before that, the profile data should be received, so the form will not be empty.
 [v1/get-user] [PlDb] (GET)
 
 #### Remove
 - [v1/remove-account]() (DELETE)
 
# Patient functions
####  Storing data 
The patient can store his medical data using this endpoint:
 - http://localhost:9000/v1/medidata (POST)

The data sent are glucose and carb. The measured date is saved automatically using the 
current date, assuming the measurement of the diabetic patient happened at the time of adding
the data.

####  Viewing data
The patient can view all his medical data:
- [v1/medidata]() (GET)

Before updating a medidata, the medidata has to be loaded, so a medidata can be viewed
independently with this endpoint:
 - [/medidata/{id}]() (GET)

The user can view his daily average blood glucose level or carb over a user specified period.
The endpoint follows this format:
- [v1/medidata/{datatype}/{fromdate}/{todate}]() (GET)

The datatype can either be glucose or carb and the from and to date is the specified period.
Also, there is another endpoint, for viewing the current and past consultations from doctors.
- [v1/consultations]() (GET)

> Medidata for a specific consultation can be seen.
- [/medidata-consultation/{cid}]() (GET)

####  Updating data
The patient can modify incorrect submitted data in his medical data recordings.
- [v1/medidata/{id}]() (PUT)

####  Deleting data
The patient can delete a medical data.
- [v1/medidata/{id}]() (DELETE)

# Doctor functions
###  Viewing data
> A doctor can browse through the patient list of the patients he consults using this endpoint:
- [v1/my-patients]() (GET)
> Also, he can view the available patients, that either are new or currently aren't having one.
- [v1/patients]() (GET)
> The patients that are not taken care by a doctor currently, can be chosen by a doctor:
- [v1/consult-patient/{pid}]() (GET)
> Also, it is possible to distinquish which patients have not had a consultation in the last month.
- [v1/patients/no-consultation]()(GET)
###  Consultations
> A consultation can be added to the clients that have not had one for this month.
- [v1/add-consultation/{pid}]() (POST)
> He can browse the consultations for each patient.
- [v1/consultations/{pid}]() (GET)
> The medidata of a patient that has consultations.
- [v1/all-medidata/{pid}]() (GET)
> He can modify a consultation.
- [v1/consultation/{cid}]() (PUT)
> (Everytime a consultation gets modified. A field on the database is getting changed to true. A seperate request is called when the user sees the warning.)

 > **An important thing to mention is that patients can be chosen by a doctor if they don't have
 a doctor id. Also, doctors can provide a consultation to a patient only if a month of data recording has been passed.**

#  Reporter functions
> The reporter can monitor the information submissions of a patient over a time range. In order
for all the patients (with a doctor or without) to load, first we call the following endpoint.
- [/v1/my-patients/]() (GET)
> Then in order to view the medidata in a specified period, the below endpoint is used.
- [v1/patient/{pid}/medidata/{fromdate}/{todate}]() (GET)
> The information submissions (consultations) of a doctor over a time range. In order to get all the doctors first, and then view the consultations, the following endpoint is used:
- [v1/inactive-doctors]() (GET) 
> Then in order to get the consultations. 
- [/doctor/{did}/consultation/{fromdate}/{todate}]() (GET) 
> The previous endpoint can also be called in this form:
- [/inactive-doctors/{fromdate}/{todate}]() (GET) 
> In the latter form though, the usage is completely different. It is used for returning
the doctors with no activity in the specified date. 



> The list of the patients who are waiting for a consultation and the time elapsed since they needed to have one.
-	[v1/patients/consultation-pending]()  (GET) 
	
> The list of the patients with no activity over a time range.
- [v1/patients/{fromdate}/{todate}]()  (GET) 

### Required Libraries to install in Angular

In order for the all the components to work, the below libraries should be installed:

| Plugin | README | Command | 
| ------ | ------ | -------- |
| Material Design Bootstrap | https://mdbootstrap.com/ | npm i mdbootstrap
| Chart.js | https://www.chartjs.org/ | npm install chart.js --save

### Required Tools

 - Maven
 - Hibernate Framework
 - MySQL database



